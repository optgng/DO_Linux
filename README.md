# Операционные системы UNIX/Linux (Базовый).

  1. [Установка ОС](#part-1-установка-ос)  
  2. [Создание пользователя](#part-2-создание-пользователя)  
  3. [Настройка сети ОС](#part-3-настройка-сети-ос)   
  4. [Обновление ОС](#part-4-обновление-ос)  
  5. [Использование команды  sudo](#part-5-использование-команды-sudo)  
  6. [Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)  
  7. [Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)  
  8. [Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)   
  9. [Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)   
  10. [Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)   
  11. [Использование утилиты df](#part-11-использование-утилиты-df)    
  12. [Использование утилиты du](#part-12-использование-утилиты-du)    
  13. [Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)    
  14. [Работа с системными журналами](#part-14-работа-с-системными-журналами)     
  15. [Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)    



## Part 1. Установка ОС

Версия Ubuntu:

![linux-version](images/task_1.png)
***

## Part 2. Создание пользователя

Добавление пользоватлея test-user

![linux-useradd](images/task_2_1.png)

Содержимое файла passwd

![linux-useradd](images/task_2_2.png)

***


## Part 3. Настройка сети ОС

Задаю название машины вида user-1

![linux-network](images/task_3_1.png)

Устанавливаю временную зону МSK.  

![linux-network](images/task_3_2.png)

Установка net-tools

![linux-network](images/task_3_3.png)

Информация о сетевых интерфейсах

![linux-network](images/task_3_4.png)
<br>

>**&nbsp;&nbsp;&nbsp;&nbsp;Loopback (lo) interface** - это виртуальный сетевой интерфейс на компьютере, который используется для тестирования сетевых приложений и для проверки работоспособности сетевых настроек. Он обычно имеет IP-адрес 127.0.0.1 и может использоваться для обращения к компьютеру по сети через этот IP-адрес. Loopback интерфейс не связан с физическими сетевыми интерфейсами, и все данные, отправленные на него, будут получены и обработаны на этом же компьютере.


При выводе информации по интерфейсу enp0s3 от DHCP-сервера, можно получить информацию о ip-адресе машины и default gateway.

![linux-network](images/task_3_5.png)
***
<br>

>**&nbsp;&nbsp;&nbsp;&nbsp;DHCP (Dynamic Host Configuration Protocol)**- это стандартный протокол, который используется для автоматической настройки сетевых параметров компьютеров на сети, таких как IP-адрес, шлюз по умолчанию, маска подсети и DNS-серверы. DHCP серверы автоматически назначают IP-адреса компьютерам при подключении к сети и обеспечивают управление сетевой конфигурацией. Это упрощает настройку компьютеров и снижает количество ошибок, связанных с ручной настройкой сетевых параметров. В целом, DHCP позволяет сетевым администраторам управлять сетью более эффективно и уменьшать время настройки и сопровождения сетевых устройств.

<br>

Внешний ip-address:

![linux-network](images/task_3_6.png)

Default-gateway:

![linux-network](images/task_3_7.png)

Изменение и применение настроек в файле /etc/netplan/00-installer-config.yaml:

![linux-network](images/task_3_8.png)


Применение конфигурации и перезагрузка:

![linux-network](images/task_3_9.png)


Настройки были применены успешно:

![linux-network](images/task_3_10.png)

Пинг 1.1.1.1 и ya.ru:

![linux-network](images/task_3_11.png)

***

## Part 4. Обновление ОС

Все обновления были установлены:

![linux-upgrade](images/task_4.png)

***

## Part 5. Использование команды **sudo**

Было выполнено добавление пользователя test-user к привелигерованной группе, после переключение на test-user, изменение названия машины на ubun:

![linux-sudo](images/task_5.png)

***

## Part 6. Установка и настройка службы времени

Информация о часовом поясе, синхронизации времени и текущем времени:

![linux-time](images/task_6.png)

## Part 7. Установка и использование текстовых редакторов 

Установка редакторов:

![linux-text-editors](images/task_7_1.png)

**vim** для сохранения изменений - :wq

![linux-text-editors](images/task_7_2.png)

**nano** для сохранения изменений - ctrl+o -> enter -> ctrl+x

![linux-text-editors](images/task_7_3.png)

**mcedit** для сохранения изменений - F2 -> enter -> F10

![linux-text-editors](images/task_7_4.png)

**vim** для выхода без изменений - :wq

![linux-text-editors](images/task_7_5.png)

**nano** для выхода без изменений - ctrl+x -> n

![linux-text-editors](images/task_7_6.png)

**mcedit** для выхода без изменений - F10 -> No -> enter

![linux-text-editors](images/task_7_7.png)

**vim** для поиска - /выражение

![linux-text-editors](images/task_7_8.png)

**vim** для замены - :s/поиск/на что заменить

![linux-text-editors](images/task_7_9.png)

**nano** для поиска - ctrl+w -> поиск

![linux-text-editors](images/task_7_10.png)

**nano** для замены - ctrl+\ -> поиск -> enter -> на что заменить -> y

![linux-text-editors](images/task_7_11.png)

**mcedit** для поиска - F7 -> поиск -> ОК

![linux-text-editors](images/task_7_12.png)

**mcedit** для замены - F4 -> поиск -> на что заменить -> OK -> Replace

![linux-text-editors](images/task_7_13.png)

## Part 8. Установка и базовая настройка сервиса **SSHD**

Установил ssh:

![linux-ssh](images/task_8_1.png)

Установил openssh-server:

![linux-ssh](images/task_8_2.png)

Добавил службу ssh в автостарт при загрузке системы с помощью команды: <br>

`sudo systemctl enable ssh`

Смотрю состояние службы ssh с помощью команды: <br>

`systemctl status ssh`

![linux-ssh](images/task_8_3.png)

Перенастраиваю порт на 2022 в файле sshd_config:

![linux-ssh](images/task_8_4.png)

Перезапускаю службу: <br>

`sudo systemctl restart ssh`

Смотрю наличие ssh с помощью команды:

`ps -A | grep sshd`

и после перезагружаю систему:

![linux-ssh](images/task_8_5.png)

Команда `ps` используется для просмотра текущих процессов в системе. Она имеет множество опций, которые позволяют настроить вывод информации о процессах. Рассмотрим основные опции команды `ps`:

- -A, -e - выбрать все процессы <br>
- -a - выбрать все процессы, кроме фоновых <br>
- -d - выбрать все процессы, даже фоновые, кроме процессов сессий
- -N - выбрать все процессы кроме указанных
- -С - выбирать процессы по имени команды<br>
- -G - выбрать процессы по ID группы<br>
- -p,  - выбрать процессы PID<br>
- -s - выбрать процессы по ID сессии<br>
- -t - выбрать процессы по tty<br>
- -u - выбрать процессы пользователя<br>

Вывод команды <br>

`sudo netstat -tan`

![linux-ssh](images/task_8_6.png)

- -t - вывод соединений по протоколу tcp.
- -a - вывод прослушивающих и не прослушивающих сокетов.
- -n - вывод числовых адресов, не пытаясь определить символьное имя узла, порт или имя пользователя.

- Proto - протокол (например: tcp, udp, udpl, raw), используемый сокетом.
- Recv-Q - количество байт, не скопированных пользовательской программой, подключенной к этому сокету. 
- Send-Q - количество байтов, не подтвержденных удаленным узлом. 
- Local Adress - адрес и номер порта локального конца сокета. Если не указана опция -numeric (-n), адрес сокета преобразуется в каноническое имя хоста (FQDN), а номер порта - в соответствующее имя сервиса.
- Foreign Adress - адрес и номер порта удаленного сокета. Аналогично "Локальному адресу". 
- State - cостояние сокета. В данном случае, состояние LISTEN означает, что данный сокет прослушивает входящие соединения.

## Part 9. Установка и использование утилит **top**, **htop**

Вывод команды: <br>

`top -E k`

![linux-top](images/task_9_1.png)

- uptime - 1:13
- количество авторизованных пользователей - 1
- общую загрузку системы - 0.00, 0.00, 0.00
- общее количество процессов - 121
- загрузку cpu - 0.0%
- загрузку памяти - 180.5/4022.7
- pid процесса занимающего больше всего памяти - 1734 (top -o %CPU)
- pid процесса, занимающего больше всего процессорного времени - 724 (top -o %MEM)
 
Сортировка по PID: <br>

![linux-top](images/task_9_2.png)

Сортировка по PERCENT_CPU: <br>

![linux-top](images/task_9_3.png)

Сортировка по PERCENT_MEM: <br>

![linux-top](images/task_9_4.png)

Сортировка по TIME: <br>

![linux-top](images/task_9_5.png)

Фильтрация для процесса sshd: <br>

![linux-top](images/task_9_6.png)

Поиск по имени процесса, а именно по syslog: <br>

![linux-top](images/task_9_7.png)

Добавление вывода hostname, clock, uptime: <br>

![linux-top](images/task_9_8.png)

## Part 10. Использование утилиты **fdisk**

Запускаю команду: <br> 

`sudo fdisk -l`

![linux-fdisk](images/task_10_1.png)

- название жесткого диска - VBOX HARDDISK
- размер - 25 Gb
- количество секторов - 52428800 
- размер swap - отображается в /dev/sda2 - 2Gb

## Part 11. Использование утилиты **df** 

Запускаю команду: <br> 

`df`

![linux-fdisk](images/task_11_1.png)

Для корневого раздела (/):
  - размер раздела - 11758760
  - размер занятого пространства - 5699744
  - размер свободного пространства - 5439908
  - процент использования - 52% 
  - единица измерения - килобайт

Запускаю команду: <br> 

`df -Th`

![linux-fdisk](images/task_11_2.png)

Для корневого раздела(/):
  - размер раздела - 12Gb
  - размер занятого пространства - 5.5Gb
  - размер свободного пространства - 5.2Gb
  - процент использования - 52%
  - тип файловой системы для раздела - ext4.

## Part 12. Использование утилиты **du**

Запускаю команду: <br> 

`du`

![linux-fdisk](images/task_12_1.png)

Размер папок в байтах /home, /var, /var/log c помощью команды: <br> 

`sudo du -sb /var/log /var /home`

![linux-fdisk](images/task_12_2.png)

Размер папок в человекочитаемом виде /home, /var, /var/log c помощью команды: <br> 

`sudo du -sh /var/log /var /home`

![linux-fdisk](images/task_12_3.png)

Размер всего содержимого /var/log с помощью команды: <br> 

`sudo du -h /var/log/*`

![linux-fdisk](images/task_12_4.png)

## Part 13. Установка и использование утилиты **ncdu**

Установка ncdu: <br>

![linux-ncdu](images/task_13_1.png)

Размер директории /home: <br>

![linux-ncdu](images/task_13_2.png)

Размер директории /var: <br>

![linux-ncdu](images/task_13_3.png)

Размер директории /var/log: <br>

![linux-ncdu](images/task_13_4.png)

## Part 14. Работа с системными журналами

Просмотрел логи c помощью команд: <br>

`sudo vim /var/log/dmesg`
`sudo vim /var/log/syslog`
`sudo vim /var/log/auth.log`

Осуществил поиск по файлу auth.log с помощью команды: <br>

`sudo grep LOGIN /var/log/auth.log`

![linux-log](images/task_14_1.png)

- Время авторизации - 2 Apr 17:33:03
- Имя пользователя - teodor
- Метод входа в систему - LOGIN

Для перезапуска службы SSHd использовал команду: <br>

`sudo systemctl restart ssh`

Логи о перезапуске службы SSHd в файле /var/log/syslog с помощью команды: <br>

`sudo tail -20 /var/log/syslog`

![linux-log](images/task_14_2.png)

## Part 15. Использование планировщика заданий **CRON**

Создание задания для CRON: <br>

![linux-log](images/task_15_1.png)

Содержимое логов syslog с запущенным заданием: <br>

![linux-log](images/task_15_2.png)

Список задач CRON: <br>

![linux-log](images/task_15_3.png)

Удаление всех задач: <br>

![linux-log](images/task_15_4.png)